/* fastuts.js | Developed by Guilherme Augusto Madaleno <guimadaleno@me.com> | www.guimadaleno.com | (C) 2014 All rights reserved | Licensed under GNU GPL */
$.fn.fastuts=function(e){var t=e&&e.buttons&&e.buttons.close?e.buttons.close.class:".fastuts-buttons-close";var n=e&&e.buttons&&e.buttons.next?e.buttons.next.class:".fastuts-buttons-next";var r=e&&e.buttons&&e.buttons.prev?e.buttons.prev.class:".fastuts-buttons-prev";var i=".fastuts-tooltip";var s=0;var o=this;var u=new Array;var a=0;var f=this.selector;var l=$(o).size();var c=1;var h=e&&e.buttons&&e.buttons.close?e.buttons.close.text:"X";var p=e&&e.buttons&&e.buttons.next?e.buttons.next.text:"&#10095;";var d=e&&e.buttons&&e.buttons.prev?e.buttons.prev.text:"&#10094;";var v={init:function(){$(o).each(function(){if($(this).attr("data-fastuts-order"))a++});if(a==l){var f=0;$(o).each(function(){f=parseInt($(this).attr("data-fastuts-order"));u[f-1]=this});if(u.length)o=u}$("body").append('<div id="fastuts-main-holder" class="fastuts-main-holder" style="display: none;"><div class="fastuts-overlay"></div><div class="fastuts-holder"><div class="'+i.replace(".","")+'"><div class="fastuts-text"></div><div class="fastuts-buttons"><a href="#" class="'+t.replace(".","")+'">'+h+'</a><a href="#" class="'+r.replace(".","")+'">'+d+'</a><a href="#" class="'+n.replace(".","")+'">'+p+"</a></div></div></div></div>");if(l){v.displayBlock(o[c-1]);v.displayButtons(1,l);if(e&&e.onReady&&$.type(e.onReady)==="function")e.onReady();$(r).off("click").on("click",function(){v.prevBlock(function(){if(e&&e.buttons&&e.buttons.prev&&e.buttons.prev.callback&&$.type(e.buttons.prev.callback)==="function")e.buttons.prev.callback(s,o);return false})});$(n).off("click").on("click",function(){v.nextBlock(function(){if(e&&e.buttons&&e.buttons.next&&e.buttons.next.callback&&$.type(e.buttons.next.callback)==="function")e.buttons.next.callback(s,o);return false})});if(e&&e.settings&&e.settings.allowKeys==true){$(document).keyup(function(t){if(t.keyCode==37){v.prevBlock(function(){if(e&&e.buttons&&e.buttons.prev&&e.buttons.prev.callback&&$.type(e.buttons.prev.callback)==="function")e.buttons.prev.callback(s,o);return false})}else if(t.keyCode==39){v.nextBlock(function(){if(e&&e.buttons&&e.buttons.next&&e.buttons.next.callback&&$.type(e.buttons.next.callback)==="function")e.buttons.next.callback(s,o);return false})}})}$(t).off("click").on("click",function(){v.hide();if(e&&e.buttons&&e.buttons.close&&e.buttons.close.callback&&$.type(e.buttons.close.callback)==="function")e.buttons.close.callback();return false});if(e&&e.overlay&&e.overlay.allowEscapeKey==true){$(document).keyup(function(t){if(t.keyCode==27){if(e&&e.overlay&&e.overlay.onClose&&$.type(e.overlay.onClose)==="function")e.overlay.onClose();v.hide()}})}$(".fastuts-overlay").off("click").on("click",function(){if(e&&e.overlay&&e.overlay.onClose&&$.type(e.overlay.onClose)==="function")e.overlay.onClose();v.hide();return false});$("#fastuts-main-holder").fadeIn(200)}},hide:function(){$(".fastuts-main-holder").fadeOut(100,function(){c=1;s=0})},displayButtons:function(e,t){if(e==1){$(r).hide();$(n).show()}else if(e==t){$(r).show();$(n).hide()}else{$(r).show();$(n).show()}},displayBlock:function(t){if($(t).html()){var n=$(t).position();var r=$(t).css("position");var s=e&&e.settings&&e.settings.spacing&&e.settings.spacing.indexOf()==-1?parseInt(e.settings.spacing.replace("px","")):40;var u=parseInt($(t).css("width").replace("px",""))+s;var a=parseInt($(t).css("height").replace("px",""))+s;var f=$.isNumeric(n.top)?n.top-s/2:s/2;var l=$.isNumeric(n.left)?n.left-s/2:s/2;var c=f+a;var h={position:"absolute",width:u+"px",height:a+"px",top:f+"px",left:l+"px",webkitTransition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",transition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",backgroundColor:$("body").css("backgroundColor")?$("body").css("backgroundColor"):"#FFFFFF"};if(c>=$(window).height()-200){$(i).removeClass("fastuts-tooltip-arrow-top").addClass("fastuts-tooltip-arrow-bottom").css({top:"-"+($(i).height()+20)+"px",left:"50%",marginLeft:"-"+$(i).width()/2+"px"})}else{$(i).removeClass("fastuts-tooltip-arrow-bottom").addClass("fastuts-tooltip-arrow-top").css({top:a+20+"px",left:"50%",marginLeft:"-"+$(i).width()/2+"px"})}$(i).children(".fastuts-text").html($(t).attr("data-fastuts-tip"));$(o).css({zIndex:"auto",position:r});$(t).css({zIndex:"2147483647",position:"relative"});$(".fastuts-overlay").css({position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",backgroundColor:e&&e.overlay&&e.overlay.color?e.overlay.color:"rgba(0,0,0,0.8)"});$(".fastuts-main-holder").css({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",zIndex:"2147483637"});$(".fastuts-holder").css(h)}},nextBlock:function(e){if(c<l){s=c=c+1;v.displayBlock(o[c-1]);v.displayButtons(s,l);e()}},prevBlock:function(e){if(c>1){s=c=c-1;v.displayBlock(o[c-1]);v.displayButtons(s,l);e()}}};v.init()}