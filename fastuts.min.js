$.fn.fastuts=function(e){var t=e&&e.buttons&&e.buttons.close?e.buttons.close.class:".fastuts-buttons-close";var n=e&&e.buttons&&e.buttons.next?e.buttons.next.class:".fastuts-buttons-next";var r=e&&e.buttons&&e.buttons.prev?e.buttons.prev.class:".fastuts-buttons-prev";var i=".fastuts-tooltip";var s=0;var o=this;var u=new Array;var a=0;var f=this.selector;var l=0;var c=0;var h=1;var p=e&&e.buttons&&e.buttons.close?e.buttons.close.text:"X";var d=e&&e.buttons&&e.buttons.next?e.buttons.next.text:"&#10095;";var v=e&&e.buttons&&e.buttons.prev?e.buttons.prev.text:"&#10094;";var m="#fastuts-main-holder";var g={init:function(){$(o).each(function(){if($(this).hasClass("fastuts")&&$(this).attr("data-fastuts-tip"))l++;if($(this).attr("data-fastuts-order"))a++});if(a&&l){var f=0;$(o).each(function(){f=parseInt($(this).attr("data-fastuts-order"))-1;u[f]=this});o=u}$(m).remove();$("body").append('<div id="'+m.replace("#","")+'" class="'+m.replace("#","")+'" style="display: none;"><div class="fastuts-overlay"></div><div class="fastuts-holder"><div class="'+i.replace(".","")+'"><div class="fastuts-text"></div><div class="fastuts-buttons"><a href="#" class="'+t.replace(".","")+'">'+p+'</a><a href="#" class="'+r.replace(".","")+'">'+v+'</a><a href="#" class="'+n.replace(".","")+'">'+d+"</a></div></div></div></div>");if(l){if($(o[h-1]).attr("data-fastuts-tip")&&$(o[h-1]).hasClass("fastuts")){g.displayBlock(o[h-1]);g.displayButtons(1,l);if(e&&e.onReady&&$.type(e.onReady)==="function")e.onReady();$(r).off("click").on("click",function(){g.prevBlock(function(){if(e&&e.buttons&&e.buttons.prev&&e.buttons.prev.callback&&$.type(e.buttons.prev.callback)==="function")e.buttons.prev.callback(s,o);return false})});$(n).off("click").on("click",function(){g.nextBlock(function(){if(e&&e.buttons&&e.buttons.next&&e.buttons.next.callback&&$.type(e.buttons.next.callback)==="function")e.buttons.next.callback(s,o);return false})});if(e&&e.settings&&e.settings.allowKeys==true){$(document).keyup(function(t){if(t.keyCode==37){g.prevBlock(function(){if(e&&e.buttons&&e.buttons.prev&&e.buttons.prev.callback&&$.type(e.buttons.prev.callback)==="function")e.buttons.prev.callback(s,o);return false})}else if(t.keyCode==39){g.nextBlock(function(){if(e&&e.buttons&&e.buttons.next&&e.buttons.next.callback&&$.type(e.buttons.next.callback)==="function")e.buttons.next.callback(s,o);return false})}})}$(t).off("click").on("click",function(){g.hide();if(e&&e.buttons&&e.buttons.close&&e.buttons.close.callback&&$.type(e.buttons.close.callback)==="function")e.buttons.close.callback();return false});if(e&&e.overlay&&e.overlay.allowEscapeKey==true){$(document).keyup(function(t){if(t.keyCode==27){if(e&&e.overlay&&e.overlay.onClose&&$.type(e.overlay.onClose)==="function")e.overlay.onClose();g.hide()}})}$(".fastuts-overlay").off("click").on("click",function(){if(e&&e.overlay&&e.overlay.onClose&&$.type(e.overlay.onClose)==="function")e.overlay.onClose();g.hide();return false});$(m).fadeIn(200)}}},hide:function(){$(".fastuts-main-holder").fadeOut(100,function(){h=1;s=0});$(o).css("z-index",c)},displayButtons:function(e,t){if(e==1&&o.length>1){$(r).hide();$(n).show()}else if(e==1&&o.length<=1){$(r).hide();$(n).hide()}else if(e==t){$(r).show();$(n).hide()}else{$(r).show();$(n).show()}},displayBlock:function(t){if($(t).html()&&$(t).hasClass("fastuts")&&$(t).attr("data-fastuts-tip")){var n=$(t).offset();var r=$(t).css("position");var s=e&&e.settings&&e.settings.spacing&&e.settings.spacing.indexOf()==-1?parseInt(e.settings.spacing.replace("px","")):40;var u=parseInt($(t).css("width").replace("px",""))+s;var a=parseInt($(t).css("height").replace("px",""))+s;var f=n.top-s/2;var l=n.left-s/2;var h=f+a;var p=l+u;var d=l;var v;var m={position:"absolute",width:u+"px",height:a+"px",top:f+"px",left:l+"px",webkitTransition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",transition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",backgroundColor:$("body").css("backgroundColor")?$("body").css("backgroundColor"):"#FFFFFF"};$(i).children(".fastuts-text").html($(t).attr("data-fastuts-tip"));$(o).each(function(){if($(this).attr("data-fastuts-previous-zindex")){$(this).css("z-index",$(this).attr("data-fastuts-previous-zindex"))}});c=$(t).css("z-index");$(t).attr("data-fastuts-previous-zindex",c);$(t).css({zIndex:"2147483637",position:$(t).css("position")=="static"?"relative":$(t).css("position")});$(".fastuts-overlay").css({position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",backgroundColor:e&&e.overlay&&e.overlay.color?e.overlay.color:"rgba(0,0,0,0.8)"});$(".fastuts-main-holder").css({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px"});if(h>=$(window).height()-200){$(i).removeClass("fastuts-tooltip-arrow-top").addClass("fastuts-tooltip-arrow-bottom").css({top:"-"+($(i).height()+20)+"px"});if(e.settings.autoScroll){$("html, body").animate({scrollTop:f-($(i).height()+40)},500)}}else{$(i).removeClass("fastuts-tooltip-arrow-bottom").addClass("fastuts-tooltip-arrow-top").css({top:a+20+"px"});if(e.settings.autoScroll){$("html, body").animate({scrollTop:f-20},500)}}if(d<=100){$(i).removeClass("fastuts-tooltip-arrow-right").addClass("fastuts-tooltip-arrow-left").css({left:"0px",right:"auto",marginLeft:"inherit"})}else if(p>=$(window).width()-100){$(i).removeClass("fastuts-tooltip-arrow-left").addClass("fastuts-tooltip-arrow-right").css({left:"auto",right:"0px",marginRight:"inherit"})}else{$(i).removeClass("fastuts-tooltip-arrow-left").removeClass("fastuts-tooltip-arrow-right").css({left:"50%",right:"auto",marginLeft:"-"+$(i).width()/2+"px",marginRight:"auto"})}$(".fastuts-holder").css(m);$(window).bind("resize",function(){if(v)clearTimeout(v);v=setTimeout(function(){n=$(t).offset();f=n.top-s/2;l=n.left-s/2;h=f+a;$(".fastuts-holder").css({position:"absolute",width:u+"px",height:a+"px",top:f+"px",left:l+"px",webkitTransition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",transition:e&&e.settings.time?"all "+e.settings.time+"s":"all 0.4s",backgroundColor:$("body").css("backgroundColor")?$("body").css("backgroundColor"):"#FFFFFF"})},300)})}},nextBlock:function(e){if(h<l){s=h=h+1;g.displayBlock(o[h-1]);g.displayButtons(s,l);e()}},prevBlock:function(e){if(h>1){s=h=h-1;g.displayBlock(o[h-1]);g.displayButtons(s,l);e()}}};g.init()}